import{o as n,c as l,a as t,b as i,t as a,u as h,F as m,r as b,d as w,e as $,f as u,w as D,g as A,v as S,h as T,i as f}from"./main-D-xxpp6D.js";import{d as V}from"./date-Bar67dSB.js";import{f as v}from"./index-D_iOJtol.js";const C={class:"bg-white p-5 space-y-3 rounded-lg"},N={class:"text-gray-500 font-black"},B={class:"font-light"},F={class:"font-light"},E={class:"text-gray-500 font-black"},I={class:"font-light"},O={class:"font-light"},H={class:"font-light"},R=t("p",{class:"text-lg font-black"},"Servicios Solicitados en la cita",-1),U={class:"text-2xl font-black text-blue-500"},j={class:"text-2xl font-black text-right"},L={class:"text-blue-600"},M={__name:"AdminAppointment",props:{appointment:{type:Object}},setup(c){return(r,o)=>(n(),l("div",C,[t("p",N,[i(" Fecha: "),t("span",B,a(h(V)(c.appointment.date)),1),i(" Hora: "),t("span",F,a(c.appointment.time)+" Horas.",1)]),t("p",E,[i(" Nombre Cliente: "),t("span",I,a(c.appointment.user.name),1),i(" Email: "),t("span",O,a(c.appointment.user.email),1),i(" Numero: "),t("span",H,a(c.appointment.phonecita),1)]),R,(n(!0),l(m,null,b(c.appointment.services,d=>(n(),l("div",{key:d.name},[t("p",null,a(d.name),1),t("p",U,a(h(v)(d.price)),1)]))),128)),t("p",j,[i(" Total a pagar: "),t("span",L,a(h(v)(c.appointment.totalAmount)),1)])]))}},P=t("p",{class:"text-white text-lg mt-5"}," A continuación podrás administrar tus próximas citas ",-1),q={class:"mt-5"},z=t("label",{for:"date",class:"block text-white text-lg"},"Selecciona una fecha:",-1),G={key:0,class:"text-white text-2xl text-center mt-5"},J={key:1},K={key:0,class:"text-white text-2xl text-center mt-5"},Q={key:1},W={class:"grid grid-cols-1 gap-5 mt-10"},X={class:"text-white text-2xl text-right mt-10"},Y={class:"text-blue-500"},Z={class:"text-white text-2xl text-right"},tt={class:"text-blue-500"},et={class:"text-white text-2xl text-right"},st={class:"text-blue-500"},ct={__name:"AppointmentsView",setup(c){const r=w(),o=$(null),d=(e,s)=>{if(!s)return e;const p=new Date(s).toISOString().split("T")[0];return e.filter(k=>new Date(k.date).toISOString().split("T")[0]===p)},_=u(()=>d(r.userAppointments||[],o.value)),x=u(()=>(r.userAppointments||[]).reduce((e,s)=>e+(s.totalAmount||0),0)),g=u(()=>(r.userVouchers||[]).reduce((e,s)=>e+(s.amount||0),0)),y=u(()=>x.value-g.value);return D(o,async()=>{try{if(console.log("Fecha seleccionada:",o.value),!o.value)return;const[e,s]=await Promise.all([f.get("https://app-salon-mevn-backend-one.vercel.app/appointmentss",{params:{date:o.value},withCredentials:!0}),f.get("https://app-salon-mevn-backend-one.vercel.app/vouchers",{params:{date:o.value},withCredentials:!0})]);r.userAppointments=e.data,r.userVouchers=s.data}catch(e){console.error("Error al obtener las citas y vales:",e)}}),(e,s)=>(n(),l(m,null,[P,t("div",q,[z,A(t("input",{type:"date",id:"date","onUpdate:modelValue":s[0]||(s[0]=p=>o.value=p),class:"border border-gray-300 p-2 rounded"},null,512),[[S,o.value]])]),h(r).loading?(n(),l("p",G," Cargando... ")):(n(),l("div",J,[_.value.length===0?(n(),l("p",K," No tienes próximas citas para la fecha seleccionada ")):(n(),l("div",Q,[t("div",W,[(n(!0),l(m,null,b(_.value,p=>(n(),T(M,{key:p._id,appointment:p},null,8,["appointment"]))),128))]),t("p",X,[i(" Total de Ingresos: "),t("span",Y,a(x.value),1)]),t("p",Z,[i(" Total de Vales: "),t("span",tt,a(g.value),1)]),t("p",et,[i(" Total Neto del Día: "),t("span",st,a(y.value),1)])]))]))],64))}};export{ct as default};
